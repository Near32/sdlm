projects:
  - "near32/PromptOptimisationSTGS"

cache_dir: 'wandb_cache'

output_dir: "SmolLM2-135M-STGSvsGS-ablation/Var2-PL80"
output_format: "pdf"
dpi: 300

# Style
plot_style: "seaborn-v0_8"
color_palette: "pastel"

font_sizes: 10 #20 #11
# OR
#font_sizes:
#  default: 10
#  title: 14
#  labels: 12
#  ticks: 10
#  legend: 11

# Global default (optional)                                                                                                                                                                 
legend_export:
  enabled: true
  format: pdf  # output format
  fontsize: 10
  figsize: #[8, 1.5]  # [width, height] in inches  
    width: 6.5 #inches
    height: 0.5 #inches
    #aspect_ratio: 1.67 #golden ratio    
  ncol: 7  # number of columns (0 for auto)
  loc: 'center'
  frameon: false
  remove_from_main: true 
  hide_xlabel: true       # Remove x-axis label from main figures
  hide_ylabel: false #true       # Remove y-axis label from main figures
  hide_title: true        # Remove title from main figures
 
# Configure Kolmogorov-Smirnov tests
Kolmogorov-Smirnov-anchors:
  #- "REINFORCE"
  - "GS(LTau)"
  - "GS(Tau=100)"

Kolmogorov-Smirnov-kwargs:
  alternative: "two-sided"
  mode: "auto"

# Global config
figsize:
  width: 3.25 #inches for one column spanning
  aspect_ratio: 1.67 # golden ratio

figures:
  - name: "Gradient-Max-Variance"
    step_column: "_step"
    metrics:
      - "stgs_grad_variance_max"
      #- "stgs_grad_bias_abs_max"
    
    barplot_config:
      enabled: true
      ylabel: "Gradient Bias"
      figsize: [6,4]
      capsize: 5
      title: "Max Gradient Variance (Mean +/- Std.Err. - PL=80)"
      xtick_rotation: 20
      log_scale: true
      #ylim: [0, 1]
      hide_xlabel: true       # Remove x-axis label from main figures
      hide_xticklabels: true       # Remove x-axis label from main figures
      hide_ylabel: true       # Remove y-axis label from main figures
      hide_yticklabels: false       # Remove y-axis label from main figures
      hide_title: true        # Remove title from main figures
 

    conditioned_barplot_config:
      enabled: true
      condition_column: "k"              # Required: column for x-axis
      condition_values: [1, 6, 11, 16, 21]     # Optional: specific values
      # Option A: List format [width, height]
      #figsize: [10, 6]
      # Option B: Dict with explicit height
      #figsize:
      #  width: 10
      #  height: 6
      # Option C: Dict with aspect ratio (width/height)
      figsize:
        width: 6.5 # 3.25 #inches
        aspect_ratio: 1.67 #golden ratio 
      
      ylabel: "Gradient Bias"
      xlabel: "Inversion Difficulty (Rank k)"
      title: "Grad Bias vs Difficulty"
      capsize: 4
      alpha: 0.9
      ylim: [0, 1]
      log_scale: false
      legend_loc: "best"
      show_values: false

    violinplot_config:
      enabled: true
      ylabel: "Gradient Bias"
      figsize: [6,4]
      capsize: 5
      title: "Max Gradient Variance (Mean +/- Std.Err. - PL=80)"
      xtick_rotation: 20
      log_scale: true
      #ylim: [0, 1]
      cut: 0
      show_means: true
      show_medians: false
      show_extremas: true
      show_points: true
      show_values: false
      hide_xlabel: true       # Remove x-axis label from main figures
      hide_xticklabels: true       # Remove y-axis label from main figures
      hide_ylabel: true       # Remove y-axis label from main figures
      hide_yticklabels: false       # Remove y-axis label from main figures
      hide_title: true        # Remove title from main figures
 

    conditioned_violinplot_config:
      enabled: true
      condition_column: "k"              # Required: column for x-axis
      condition_values: [1, 6, 11, 16, 21]     # Optional: specific values
      # Option A: List format [width, height]
      #figsize: [10, 6]
      # Option B: Dict with explicit height
      #figsize:
      #  width: 10
      #  height: 6
      # Option C: Dict with aspect ratio (width/height)
      figsize:
        width: 6.5 # 3.25 #inches
        aspect_ratio: 1.67 #golden ratio 
      
      ylabel: "Gradient Bias"
      xlabel: "Inversion Difficulty (Rank k)"
      title: "Grad Bias vs Difficulty"
      capsize: 4
      alpha: 0.9
      ylim: [0, 1]
      log_scale: false
      legend_loc: "best"
      show_values: false

    lineplot_config:
      enabled: false
      title: ""
      xlabel: ""
      ylabel: ""
      xlim: [0, 1]
      ylim: [0, 1]
    
    synchronization:
      method: "global_interpolate"
      num_points: 10000
      aggregate_on_sync_axis: true 
    
    smoothing:
      method: "running_average"
      window_size: 32
      center: True
      min_periods: 1

    groups:
      - name: "REINFORCE"
        project: "near32/PromptOptimisationSTGS"
        run_ids:
          - "ztx41ie4"
          - "w751sn0n"
          - "544wtz7z"
          - "xr2l3gbu"
          - "8in4cwq1"
        metric_aliases:
          "stgs_grad_variance_max": "reinforce_grad_variance_max"
      
      - name: "GS($\\tau$$=$$100$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#E69F00" #OI1 "#2ca02c"  # Green
        lightness: 20    # Optional: L* value (0-100)
        run_ids:
          - "1utbi1zz"
          - "yo78ohr7"
            #- "9y20gy3u"
            #- "1x5rwol3"
            #- "ae1flap9"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      - name: "GS($\\tau$$=$$1$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#E69F00" #OI1 "#2ca02c"  # Green
        lightness: 60    # Optional: L* value (0-100)
        run_ids:
          - "yo78ohr7"
          - "74u1l7w0"
          - "9o54dzqi"
          - "r9t28s8n"
            #- "89x2nr2x"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
   
      #- name: "STGS(Tau=100)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #   - "26gl5iuw"
      #    - "iv0lf4qi"
      #    - "fxu73qhy"
      #    - "vx1tb9op"
      #    - "36k2705p"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      #- name: "STGS(Tau=1 - 4 seeds)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "r9gx0kbi"
      #    - "de37uya2"
      #    - "wu7al5ow"
      #    - "savd1bn2"
        #  - ""
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
      
      - name: "GS(L$+$$\\tau$$=$$100$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#009E73" # OI3 #9900cc"  # Purple 40%
        lightness: 20    # Optional: L* value (0-100)
        run_ids:
          - "p3ymxa6s"
          - "gkbj8ddh"
          - "ih85hdt7"
          - "2aut1lwo"
          - "ro4o68zw"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      #- name: "GS(LTau=1 - 4 seeds)"
      - name: "GS(L$+$$\\tau$$=$$1$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#009E73" # OI3 #9900cc"  # Purple 40%
        lightness: 60    # Optional: L* value (0-100)
        run_ids:
          - "8dqvoghq"
          - "ln03i3cu"
          - "euds61ar"
          - "aetmlw6l"
            #- "3aza8swx"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      #- name: "STGS(LTau=100 - 4 seeds)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "afa5frpm"
      #    - "d388onbv"
      #    - "xbsjdidb"
      #    - "9c5zfbaz"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps"
     
      #- name: "STGS(LTau=1)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "7kaw3s7t"
      #    - "cy5qg5bw"
      #    - "10bkzfxv"
      #    - "g9abwgn2"
      #    - "jssl36si"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
               
      - name: "GS(D$+$L$+$$\\tau$$=$$100$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#0072B2" #OI5 "#258fda"  # Blue
        lightness: 20    # Optional: L* value (0-100)
        run_ids:
          - "35c80euk"
          - "vxsnb3ov"
          - "3tfvm5wa"
          - "pw9jlvxf"
          - "l335g92v"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      - name: "GS(D$+$L$+$$\\tau$$=$$1$)"
        project: "near32/PromptOptimisationSTGS"
        color: "#0072B2" #OI5 "#258fda"  # Blue
        lightness: 60    # Optional: L* value (0-100)
        run_ids:
          - "sbjxgre3"
          - "ncojjl0g"
          - "99vnz3ko"
          - "t79u7mhd"
          - "qzqqxf93"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps" 
 
      #- name: "STGS(DLTau=100)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "ijajrpxx"
      #    - "sw5vc7ct"
      #    - "bh8mdwmi"
      #    - "ikwu0xpx"
      #    - "s812d41w"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps"
      
      #- name: "STGS(DLTau=1)"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "1ipm9764"
      #    - "ekulrwie"
      #    - "h3qv2x61"
      #    - "ef5as961"
      #    - "kxrnqx7d"
        #metric_aliases:
        #  "mean_episode_return": "rollout/ep_info_rew_mean"
        #  "obs_count": "time/total_timesteps"
      
      #- name: "REINFORCE"
      #  project: "near32/PromptOptimisationSTGS"
      #  run_ids:
      #    - "ztx41ie4"
      #    - "w751sn0n"
      #    - "544wtz7z"
      #    - "xr2l3gbu"
      #    - "8in4cwq1"
        #metric_aliases:
        #  "sdlm_grad_variance_max": "stgs_grad_bias_reference_grad_variance_max"
      
       
    
      
